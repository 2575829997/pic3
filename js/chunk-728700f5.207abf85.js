(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-728700f5"],{"3faf":function(t,e,n){"use strict";var i=n("b47d"),o=n.n(i);o.a},5745:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"new-page",style:"min-height: "+e.pageMinHeight+"px"},[i("div",{staticClass:"headbtn"},[i("a-button",{staticClass:"btn",attrs:{type:"primary",disabled:0==e.selectedRowKeys.length},on:{click:e.delmul}},[e._v("删除选中服务")])],1),i("div",[i("p",{staticStyle:{color:"red"}},[e._v("注意:从语音下发的服务都属于【人工服务】")]),i("div",{staticClass:"find"},[i("a-input",{staticClass:"finditem",attrs:{placeholder:"服务单号"},model:{value:e.formfind.oddid,callback:function(t){e.$set(e.formfind,"oddid",t)},expression:"formfind.oddid"}}),i("a-select",{staticClass:"finditem",model:{value:e.formfind.hotelid,callback:function(t){e.$set(e.formfind,"hotelid",t)},expression:"formfind.hotelid"}},e._l(e.hotellist,(function(t,n){return i("a-select-option",{key:n,attrs:{value:t.hotelId}},[e._v(" "+e._s(t.hotelCname)+" ")])})),1),i("a-input",{staticClass:"finditem",attrs:{placeholder:"房间号"},model:{value:e.formfind.roomId,callback:function(t){e.$set(e.formfind,"roomId",t)},expression:"formfind.roomId"}}),i("a-input",{staticClass:"finditem",attrs:{placeholder:"服务类型"},model:{value:e.formfind.typeName,callback:function(t){e.$set(e.formfind,"typeName",t)},expression:"formfind.typeName"}}),i("a-select",{staticClass:"finditem",attrs:{placeholder:"状态"},model:{value:e.formfind.status,callback:function(t){e.$set(e.formfind,"status",t)},expression:"formfind.status"}},[i("a-select-option",{attrs:{value:"-1"}},[e._v(" 全部状态 ")]),i("a-select-option",{attrs:{value:"0"}},[e._v(" 未处理 ")]),i("a-select-option",{attrs:{value:"3"}},[e._v(" 处理中 ")]),i("a-select-option",{attrs:{value:"2"}},[e._v(" 已完成 ")])],1),i("a-button",{attrs:{type:"primary"},on:{click:e.findbutton}},[e._v(" 搜索 ")])],1),i("a-table",{attrs:{pagination:!1,"row-selection":e.rowSelection,bordered:"",columns:e.columns,"data-source":e.orderlist,rowKey:function(t){return t.roomserviceEntity.oddid},expandRowByClick:!1,expandIconAsCell:!1,expandIconColumnIndex:5,expandIcon:function(e){return t.customExpandIcon(e)}},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return i("p",{staticStyle:{margin:"0"}},[e._v(" "+e._s(t.roomserviceEntity.rec)+" ")])}},{key:"startime",fn:function(t,n){return i("span",{},[e._v(" "+e._s(e.formatDate(n.roomserviceEntity.startime))+" ")])}},{key:"endtime",fn:function(t,n){return i("span",{},[e._v(" "+e._s(null==n.roomserviceEntity.endtime?"":e.formatDate(n.roomserviceEntity.endtime))+" ")])}},{key:"duetime",fn:function(t,n){return i("span",{},[e._v(" "+e._s(null==n.roomserviceEntity.duetime?"":e.formatDate(n.roomserviceEntity.duetime))+" ")])}},{key:"status",fn:function(t,n){return i("span",{},[e._v(" "+e._s(0==n.roomserviceEntity.status?"未处理":1==n.roomserviceEntity.status?"处理中":2==n.roomserviceEntity.status?"已完成":3==n.roomserviceEntity.status?"处理中":"点击完成")+" ")])}},{key:"rec",fn:function(t,n){return i("span",{},[e._v(" "+e._s(n.roomserviceEntity.rec.length>15?n.roomserviceEntity.rec.substring(0,15)+"...":n.roomserviceEntity.rec)+" ")])}}])})],1),i("div",{staticClass:"page"},[i("a-pagination",{attrs:{total:e.pageinfo.total,defaultPageSize:e.pageinfo.size},on:{change:e.onChangePage},model:{value:e.pageinfo.page,callback:function(t){e.$set(e.pageinfo,"page",t)},expression:"pageinfo.page"}})],1)])},o=[],a=n("5530"),s=n("5880"),r=n("1da1"),c=(n("96cf"),n("7424")),d=n("b775");function l(t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(d["e"])(c["MULDEL"],d["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function m(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(d["e"])(c["FINDODERLIST"],d["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}var p=n("6af2"),g=[{title:"服务单号",width:150,ellipsis:!0,dataIndex:"roomserviceEntity.oddid",key:"roomserviceEntity.oddid",align:"center",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"酒店名称",dataIndex:"hotelcname",key:"hotelcname"},{title:"房间号",width:80,align:"center",dataIndex:"roomserviceEntity.roomid"},{title:"服务类型",dataIndex:"roomserviceEntity.typeName",key:"roomserviceEntity.typeName"},{title:"具体描述",width:160,dataIndex:"roomserviceEntity.rec",key:"roomserviceEntity.rec",scopedSlots:{customRender:"rec"}},{title:"创建时间",width:160,dataIndex:"roomserviceEntity.startime",key:"roomserviceEntity.startime",scopedSlots:{customRender:"startime"}},{title:"接单时间",width:160,dataIndex:"roomserviceEntity.duetime",key:"roomserviceEntity.duetime",scopedSlots:{customRender:"duetime"}},{width:160,title:"完成时间",dataIndex:"roomserviceEntity.endtime",key:"roomserviceEntity.endtime",scopedSlots:{customRender:"endtime"}},{title:"接单人",dataIndex:"duestaffname",key:"duestaffname"},{title:"服务状态",align:"center",key:"roomserviceEntity.status",scopedSlots:{customRender:"status"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"}}],h={name:"roomServicesList",components:{MyIcon:p["a"]},data:function(){return{formfind:{hotelid:560,oddid:"",roomId:"",typeName:"",status:"-1"},pageinfo:{total:50,size:10,page:1},selectedRowKeys:"",searchText:"",searchInput:null,searchedColumn:"",columns:g,orderlist:[]}},watch:{checkedKeys:function(t){}},mounted:function(){this.init()},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(s["mapState"])("setting",["pageMinHeight"])),Object(s["mapGetters"])("account",["user","hotellist"])),{},{rowSelection:function(){var t=this;return{onChange:function(e,n){t.selectedRowKeys=e}}}}),methods:{findbutton:function(){this.getorderlists(1,10)},init:function(){this.getorderlists(this.pageinfo.page,this.pageinfo.size)},delmul:function(){this.$createElement;var t=this,e={};e.selectOddidList=this.selectedRowKeys,this.$confirm({title:"你想删除这些记录吗",content:function(t){return t("div",{style:"color:red;"},["删除后就找不到了"])},onOk:function(){var n=this;l(e).then((function(e){null==e.data.code&&(n.$notification.open({message:"错误",description:e.data}),n.$router.push("/login")),200==e.data.code&&(t.$notification.open({message:"操作成功",description:e.data.msg}),t.selectedRowKeys=[],t.init())}))},onCancel:function(){},class:"test"})},formatDate:function(t){t=new Date(t);var e=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate()<10?"0"+t.getDate():t.getDate(),o=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",a=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+n+i+" "+o+a+s},customExpandIcon:function(t){var e=this.$createElement;return t.record.roomserviceEntity.rec.length>15?t.expanded?e("a",{style:{color:"#4C7AF0",marginRight:0},on:{click:function(e){t.onExpand(t.record,e)}}},[e("span",{attrs:{type:"link"}},["折叠"])]):e("a",{style:{color:"#4C7AF0",marginRight:0},on:{click:function(e){t.onExpand(t.record,e)}}},[e("span",{attrs:{type:"link"}},[" 展开"])]):e("span",{style:{marginRight:0}})},onChangePage:function(t,e){this.getorderlists(t,e)},getorderlists:function(t,e){var n=this,i={},o={};o.page=t,o.limit=e,i.hotelIdList=this.user.hotelIdList,i.params=JSON.stringify(o),i.find=this.formfind,m(i).then((function(t){null==t.data.code&&(n.$notification.open({message:"错误",description:t.data}),n.$router.push("/login")),n.orderlist=t.data.findlist.list,n.pageinfo.total=t.data.findlist.totalCount,n.pageinfo.page=t.data.findlist.currPage}))}}},y=h,v=(n("3faf"),n("0c7c")),E=Object(v["a"])(y,i,o,!1,null,"2464446c",null),k=E.exports;e["default"]=k},b47d:function(t,e,n){}}]);