(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86bd5be8"],{"40ab":function(t,e,n){},5745:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"new-page roomservicepage"},[o("div",{staticClass:"headbtn"},[o("a-button",{staticClass:"btn",attrs:{type:"primary",disabled:0==e.selectedRowKeys.length},on:{click:e.delmul}},[e._v("删除选中服务")])],1),o("div",{staticClass:"center"},[o("div",{staticClass:"tablediv"},[o("div",{staticClass:"find"},[o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("a-row",{attrs:{gutter:12,type:"flex",justify:"space-around",align:"middle"}},[o("a-col",{attrs:{span:6}},[o("a-input",{staticClass:"finditem",attrs:{placeholder:"服务单号"},model:{value:e.formfind.oddid,callback:function(t){e.$set(e.formfind,"oddid",t)},expression:"formfind.oddid"}})],1),o("a-col",{directives:[{name:"show",rawName:"v-show",value:e.hotellist.length>1||"hotels"!=e.user.type,expression:"hotellist.length>1||user.type!='hotels'"}],attrs:{span:6}},[o("div",[o("a-select",{staticClass:"finditem",attrs:{"show-search":"",placeholder:"选择酒店","option-filter-prop":"children","filter-option":e.filterOption},on:{focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange},model:{value:e.formfind.hotelid,callback:function(t){e.$set(e.formfind,"hotelid",t)},expression:"formfind.hotelid"}},e._l(e.hotellist,(function(t,n){return o("a-select-option",{key:n,attrs:{value:t.hotelId}},[e._v(" "+e._s(t.hotelCname)+" ")])})),1)],1)]),o("a-col",{attrs:{span:6}},[o("a-input",{staticClass:"finditem",attrs:{placeholder:"房间号"},model:{value:e.formfind.roomId,callback:function(t){e.$set(e.formfind,"roomId",t)},expression:"formfind.roomId"}})],1),o("a-col",{attrs:{span:6}},[o("a-select",{staticClass:"finditem",attrs:{placeholder:"服务类型"},on:{change:e.changeserviceType}},[o("a-select-option",{attrs:{value:"-1"}},[e._v(" 全部服务 ")]),o("a-select-option",{attrs:{value:"维修服务"}},[e._v(" 维修服务 ")]),o("a-select-option",{attrs:{value:"打扫服务"}},[e._v(" 打扫服务 ")]),o("a-select-option",{attrs:{value:"送物服务"}},[e._v(" 送物服务 ")]),o("a-select-option",{attrs:{value:"礼宾服务"}},[e._v(" 礼宾服务 ")])],1)],1)],1)],1),o("a-row",{attrs:{gutter:12,type:"flex",justify:"space-around",align:"middle"}},[o("a-col",{attrs:{span:6}},[o("a-select",{staticClass:"finditem",attrs:{placeholder:"服务来源"},on:{change:e.changessource}},[o("a-select-option",{attrs:{value:"-1"}},[e._v(" 全部来源 ")]),o("a-select-option",{attrs:{value:"0"}},[e._v(" 小布鲁小程序 ")]),o("a-select-option",{attrs:{value:"1"}},[e._v(" AI智能语音 ")])],1)],1),o("a-col",{attrs:{span:6}},[o("a-select",{staticClass:"finditem",attrs:{placeholder:"状态"},model:{value:e.formfind.status,callback:function(t){e.$set(e.formfind,"status",t)},expression:"formfind.status"}},[o("a-select-option",{attrs:{value:"-1"}},[e._v(" 全部状态 ")]),o("a-select-option",{attrs:{value:"0"}},[e._v(" 未处理 ")]),o("a-select-option",{attrs:{value:"3"}},[e._v(" 处理中 ")]),o("a-select-option",{attrs:{value:"2"}},[e._v(" 已完成 ")])],1)],1),o("a-col",{attrs:{span:6}},[o("a-button",{staticClass:"finditem",attrs:{type:"primary"},on:{click:e.findbutton}},[e._v(" 搜索 ")])],1),o("a-col",{attrs:{span:6}},[o("a-button",{staticClass:"finditem",attrs:{type:"primary"},on:{click:e.exporte}},[e._v(" 当前酒店导出excel ")])],1)],1)],1),o("div",{staticClass:"table"},[o("a-table",{attrs:{pagination:!1,"row-selection":e.rowSelection,bordered:"",columns:e.columns,"data-source":e.orderlist,rowKey:function(t){return t.roomserviceEntity.oddid},expandRowByClick:!1,expandIconAsCell:!1,expandIconColumnIndex:5,expandIcon:function(e){return t.customExpandIcon(e)}},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return o("p",{staticStyle:{margin:"0"}},[e._v(" "+e._s(t.roomserviceEntity.rec)+" ")])}},{key:"startime",fn:function(t,n){return o("span",{},[e._v(" "+e._s(e.formatDate(n.roomserviceEntity.startime))+" ")])}},{key:"endtime",fn:function(t,n){return o("span",{},[e._v(" "+e._s(null==n.roomserviceEntity.endtime?"":e.formatDate(n.roomserviceEntity.endtime))+" ")])}},{key:"duetime",fn:function(t,n){return o("span",{},[e._v(" "+e._s(null==n.roomserviceEntity.duetime?"":e.formatDate(n.roomserviceEntity.duetime))+" ")])}},{key:"status",fn:function(t,n){return o("span",{},[e._v(" "+e._s(0==n.roomserviceEntity.status?"未处理":1==n.roomserviceEntity.status?"处理中":2==n.roomserviceEntity.status?"已完成":3==n.roomserviceEntity.status?"处理中":"点击完成")+" ")])}},{key:"source",fn:function(t,n){return o("span",{},[e._v(" "+e._s(0==n.roomserviceEntity.source?"小布鲁":1==n.roomserviceEntity.source?"AI语音":"未知")+" ")])}},{key:"rec",fn:function(t,n){return o("span",{},[e._v(" "+e._s(n.roomserviceEntity.rec.length>15?n.roomserviceEntity.rec.substring(0,15)+"...":n.roomserviceEntity.rec)+" ")])}}])})],1)])]),o("div",{staticClass:"page"},[o("a-pagination",{attrs:{total:e.pageinfo.total,defaultPageSize:e.pageinfo.size},on:{change:e.onChangePage},model:{value:e.pageinfo.page,callback:function(t){e.$set(e.pageinfo,"page",t)},expression:"pageinfo.page"}})],1)])},i=[],a=n("5530"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("5880")),r=n("1da1"),c=(n("96cf"),n("7424")),l=n("b775");function d(t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(l["e"])(c["MULDEL"],l["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function p(t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(l["e"])(c["FINDODERLIST"],l["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function m(t,e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=Object(l["e"])(c["EXPORTEXCEL"]+"/"+e+"/"+n,l["a"].GET,null,{responseType:"arraybuffer"}),t.abrupt("return",o);case 2:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}var g=n("6af2"),v=n("b516"),y=[{title:"服务单号",width:150,ellipsis:!0,dataIndex:"roomserviceEntity.oddid",key:"roomserviceEntity.oddid",align:"center",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"酒店名称",dataIndex:"hotelcname",key:"hotelcname"},{title:"房间号",width:80,align:"center",dataIndex:"roomserviceEntity.roomid"},{title:"服务类型",dataIndex:"roomserviceEntity.servicetype",key:"roomserviceEntity.servicetype"},{title:"具体描述",width:160,dataIndex:"roomserviceEntity.rec",key:"roomserviceEntity.rec",scopedSlots:{customRender:"rec"}},{title:"创建时间",width:160,dataIndex:"roomserviceEntity.startime",key:"roomserviceEntity.startime",scopedSlots:{customRender:"startime"}},{title:"接单时间",width:160,dataIndex:"roomserviceEntity.duetime",key:"roomserviceEntity.duetime",scopedSlots:{customRender:"duetime"}},{width:160,title:"完成时间",dataIndex:"roomserviceEntity.endtime",key:"roomserviceEntity.endtime",scopedSlots:{customRender:"endtime"}},{title:"接单人",dataIndex:"duestaffname",key:"duestaffname"},{title:"服务状态",align:"center",key:"roomserviceEntity.status",scopedSlots:{customRender:"status"}},{title:"来源",align:"center",key:"roomserviceEntity.source",scopedSlots:{customRender:"source"}},{title:"操作",align:"center",scopedSlots:{customRender:"action"}}],b={name:"roomServicesList",components:{MyIcon:g["a"]},data:function(){return{chotelname:"",formfind:{serviceType:"",hotelid:0,oddid:"",roomId:"",typeName:"",status:"-1",source:""},pageinfo:{total:50,size:10,page:1},selectedRowKeys:"",searchText:"",searchInput:null,searchedColumn:"",columns:y,orderlist:[]}},watch:{checkedKeys:function(t){}},mounted:function(){this.formfind.hotelid=this.hotellist[0].hotelId,this.chotelname=this.hotellist[0].hotelCname,this.init()},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(s["mapState"])("setting",["pageMinHeight"])),Object(s["mapGetters"])("account",["user","hotellist"])),{},{rowSelection:function(){var t=this;return{onChange:function(e,n){t.selectedRowKeys=e}}}}),methods:{changessource:function(t){this.formfind.source=t,"-1"==t&&(this.formfind.source="")},changeserviceType:function(t){this.formfind.serviceType=t,"-1"==t&&(this.formfind.serviceType="")},handleChange:function(t){var e=Object(v["gethotelnameByiid"])(t,this.hotellist);this.chotelname=e},handleBlur:function(){},handleFocus:function(){},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},exporte:function(){m(this.formfind.hotelid,this.chotelname).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.style.display="none",n.href=e,n.setAttribute("download","exportExcel.xlsx"),document.body.appendChild(n),n.click()}))},findbutton:function(){this.getorderlists(1,10)},init:function(){this.getorderlists(this.pageinfo.page,this.pageinfo.size)},delmul:function(){this.$createElement;var t=this,e={};e.selectOddidList=this.selectedRowKeys,this.$confirm({title:"你想删除这些记录吗",content:function(t){return t("div",{style:"color:red;"},["删除后就找不到了"])},onOk:function(){var n=this;d(e).then((function(e){null==e.data.code&&(n.$notification.open({message:"错误",description:e.data}),n.$router.push("/login")),200==e.data.code&&(t.$notification.open({message:"操作成功",description:e.data.msg}),t.selectedRowKeys=[],t.init())}))},onCancel:function(){},class:"test"})},formatDate:function(t){t=new Date(t);var e=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=t.getDate()<10?"0"+t.getDate():t.getDate(),i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",a=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+n+o+" "+i+a+s},customExpandIcon:function(t){var e=this.$createElement;return t.record.roomserviceEntity.rec.length>15?t.expanded?e("a",{style:{color:"#4C7AF0",marginRight:0},on:{click:function(e){t.onExpand(t.record,e)}}},[e("span",{attrs:{type:"link"}},["折叠"])]):e("a",{style:{color:"#4C7AF0",marginRight:0},on:{click:function(e){t.onExpand(t.record,e)}}},[e("span",{attrs:{type:"link"}},[" 展开"])]):e("span",{style:{marginRight:0}})},onChangePage:function(t,e){this.getorderlists(t,e)},getorderlists:function(t,e){var n=this,o={},i={};i.page=t,i.limit=e,o.hotelIdList=this.user.hotelIdList,o.params=JSON.stringify(i),o.find=this.formfind,p(o).then((function(t){null==t.data.code&&(n.$notification.open({message:"错误",description:t.data}),n.$router.push("/login")),n.orderlist=t.data.findlist.list,n.pageinfo.total=t.data.findlist.totalCount,n.pageinfo.page=t.data.findlist.currPage}))}}},w=b,E=(n("cc86"),n("0c7c")),x=Object(E["a"])(w,o,i,!1,null,"64486358",null),k=x.exports;e["default"]=k},b516:function(t,e){function n(t){t=new Date(t);var e=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",o=t.getDate()<10?"0"+t.getDate():t.getDate(),i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",a=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+n+o+" "+i+a+s}function o(t,e){for(var n="",o=0,i=0;i<e.length;i++)if(t==e[i].hotelId){n=e[i].hotelCname,o=1;break}return 0==o&&(n="请选择酒店"),n}t.exports={formatDate:n,gethotelnameByiid:o}},cc86:function(t,e,n){"use strict";var o=n("40ab"),i=n.n(o);i.a}}]);