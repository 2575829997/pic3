(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f36392b8"],{"3c89":function(t,e,n){},"96ad":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"e",(function(){return v}));var i=n("1da1"),r=(n("96cf"),n("b775")),a=n("7424");function o(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(r["e"])(a["HOTELLIST"],r["a"].GET),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function c(t){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(r["e"])(a["TESTROOMTV"],r["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(t){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(r["e"])(a["GETROOMSTAUS"],r["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function f(t,e){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object(r["e"])(a["DEVICELIST"]+e,r["a"].POST,n),t.abrupt("return",i);case 2:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function p(t,e){return m.apply(this,arguments)}function m(){return m=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object(r["e"])(a["DEVICELISTALL"]+e,r["a"].POST,n),t.abrupt("return",i);case 2:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function v(t){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(r["e"])(a["MARKDEVICE"],r["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}},c02e:function(t,e,n){"use strict";var i=n("3c89"),r=n.n(i);r.a},cc01:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-page",style:"min-height: "+t.pageMinHeight+"px"},[n("div",{staticClass:"headbtn"},[n("a-button",{staticClass:"btn",attrs:{type:"primary",disabled:!t.hasSelected},on:{click:t.showModal}},[t._v(t._s(t.selectedRowKeys.length)+" "),n("hr"),t._v(" "+t._s(t.devicelistshow.length)+" ")])],1),n("div",[n("h2",[t._v("设备标注")]),n("br"),t._v(" ①设备初始化，默认为0;         ②设备如果注册过，再注册，如果房号换了或者酒店号换了，标记重置为0;         ③设备如果注册过，再注册，如果房号换了或者酒店号都没换，标记不变;         "),n("div",{staticClass:"find"},[n("div",{staticClass:"select"},[n("label",[t._v("当前酒店：")]),n("a-select",{staticClass:"finditem",staticStyle:{width:"250px"},attrs:{"show-search":"",placeholder:"选择一个酒店","option-filter-prop":"children","filter-option":t.filterOption},on:{focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange1},model:{value:t.formfind.hotelid,callback:function(e){t.$set(t.formfind,"hotelid",e)},expression:"formfind.hotelid"}},t._l(t.hotellist,(function(e,i){return n("a-select-option",{key:i,attrs:{value:e.hotelId}},[t._v(" "+t._s(e.hotelCname)+" ")])})),1),n("a-input-search",{staticStyle:{width:"240px","margin-left":"20px"},attrs:{placeholder:"输入酒店号","enter-button":""},on:{search:t.handleChange1,change:t.inputchange},model:{value:t.formfind.hotelidstr,callback:function(e){t.$set(t.formfind,"hotelidstr",e)},expression:"formfind.hotelidstr"}}),n("a-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:t.filtermul}},[t._v("仅显示重复项")]),n("a-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:t.filternotmul}},[t._v("显示非重复项")]),n("a-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:t.nofilter}},[t._v("全部")])],1)]),n("div",{staticClass:"loading"},[n("a-spin",{directives:[{name:"show",rawName:"v-show",value:t.ifloading,expression:"ifloading"}],staticClass:"wow bounceInDown",attrs:{size:"large"}})],1),n("div",{staticClass:"tablecontainer"},[n("div",{staticClass:"table"},[n("a-table",{attrs:{pagination:!1,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},bordered:"",columns:t.columns,"data-source":t.devicelistshow,rowKey:function(t){return t.macId}},scopedSlots:t._u([{key:"ip",fn:function(e,i){return n("span",{},[t._v(" "+t._s(null==i.ip?"无":i.ip)+" ")])}},{key:"ifofficial",fn:function(e,i){return n("span",{},[n("a-tag",{staticStyle:{width:"100px","text-align":"center"},attrs:{color:0==i.ifofficial?"#b8bcc3":1==i.ifofficial?"#87d068":"#f50"}},[t._v(" "+t._s(0==i.ifofficial?"默认标记":1==i.ifofficial?"正式":"非正式")+" ")])],1)}},{key:"filterDropdown",fn:function(e){var i=e.setSelectedKeys,r=e.selectedKeys,a=e.confirm,o=e.clearFilters,s=e.column;return n("div",{staticStyle:{padding:"8px"}},[n("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Search "+s.dataIndex,value:r[0]},on:{change:function(t){return i(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(r,a,s.dataIndex)}}}),n("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(r,a,s.dataIndex)}}},[t._v(" 查询 ")]),n("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" 清空 ")])],1)}},{key:"filterIcon",fn:function(t){return n("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,i,r,a){return[t.searchText&&t.searchedColumn===a.dataIndex?n("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,i){return[e.toLowerCase()===t.searchText.toLowerCase()?n("mark",{key:i,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v(" "+t._s(e)+" ")]]}}])}),n("a-modal",{attrs:{title:"标记",width:"45%"},on:{ok:t.delmul},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("h1",[t._v("将修改以下设备为【"+t._s(0==t.formfind.status?"非正式":"正式")+"】状态：")]),n("a-select",{staticStyle:{width:"250px",margin:"10px 0px 10px 0px"},attrs:{"show-search":"",placeholder:"选择状态"},model:{value:t.formfind.status,callback:function(e){t.$set(t.formfind,"status",e)},expression:"formfind.status"}},[n("a-select-option",{attrs:{value:"2"}},[t._v(" 非正式 ")]),n("a-select-option",{attrs:{value:"1"}},[t._v(" 正式 ")])],1),n("a-row",{attrs:{type:"flex","justify-content":"left"}},t._l(t.selectedRowKeys,(function(e,i){return n("a-col",{key:i,attrs:{span:4}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)])])])},r=[],a=n("5530"),o=(n("caad"),n("2532"),n("d3b7"),n("25f0"),n("4de4"),n("d81d"),n("159b"),n("b64b"),n("5880")),s=n("96ad"),c=n("6af2"),l=void 0,u=[{title:"序号",width:30,align:"center",customRender:function(t,e,n){return"".concat(n+1)}},{title:"设备MAC",width:80,ellipsis:!0,dataIndex:"macId",key:"macId",align:"center",sorter:function(t,e){return t.macId.localeCompare(e.macId)},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.macId.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){l.searchInput.focus()}),0)}},{title:"房间号",width:50,align:"center",dataIndex:"roomId",sorter:function(t,e){return t.roomId.localeCompare(e.roomId)},sortDirections:["descend","ascend"]},{title:"版本号",width:50,align:"center",dataIndex:"version",sorter:function(t,e){return t.version.localeCompare(e.version)},sortDirections:["descend","ascend"],scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(t,e){return e.version.toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){l.searchInput.focus()}),0)}},{width:80,align:"center",title:"最近ip地址",dataIndex:"ip",scopedSlots:{customRender:"ip"}},{title:"最近上线时间",width:100,align:"center",dataIndex:"connectedAt",scopedSlots:{customRender:"connectedAt"},sorter:function(t,e){return t.macId.localeCompare(e.macId)},sortDirections:["descend","ascend"]},{title:"标记",width:80,align:"center",dataIndex:"ifofficial",scopedSlots:{customRender:"ifofficial"},filters:[{text:"默认标记",value:"0"},{text:"正式",value:"1"},{text:"非正式",value:"2"}],onFilter:function(t,e){return e.ifofficial==t}}],d={name:"deviceChnageM",components:{MyIcon:c["a"]},data:function(){return{top:10,visible:!1,ifloading:!0,formfind:{hotelid:560,status:"2"},selectedRowKeys:[],columns:u,devicelist:[],devicelistshow:[]}},watch:{checkedKeys:function(t){}},mounted:function(){this.init()},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["mapState"])("setting",["pageMinHeight"])),Object(o["mapGetters"])("account",["user","hotellist"])),{},{hasSelected:function(){return this.selectedRowKeys.length>0}}),methods:{handleSearch:function(t,e,n){e(),this.searchText=t[0],this.searchedColumn=n},handleReset:function(t){t(),this.searchText=""},onSelectChange:function(t){this.selectedRowKeys=t},showModal:function(){this.visible=!0},nofilter:function(){this.devicelistshow=this.devicelist},filternotmul:function(){this.selectedRowKeys=[];var t=this.groupBy(this.devicelist,(function(t){return[t.roomId]})),e=t.filter((function(t){if(1==t.length)return t})),n=e.map((function(t){return t[0].roomId})),i=this;this.devicelistshow=this.devicelist.filter((function(t,e,r){if(i.inarray(t.roomId,n))return t}))},filtermul:function(){this.selectedRowKeys=[];var t=this.groupBy(this.devicelist,(function(t){return[t.roomId]})),e=t.filter((function(t){if(t.length>1)return t})),n=e.map((function(t){return t[0].roomId})),i=this;this.devicelistshow=this.devicelist.filter((function(t,e,r){if(i.inarray(t.roomId,n))return t}))},groupBy:function(t,e){var n={};return t.forEach((function(t){var i=JSON.stringify(e(t));n[i]=n[i]||[],n[i].push(t)})),Object.keys(n).map((function(t){return n[t]}))},inarray:function(t,e){for(var n=0;n<e.length;n++){var i=e[n].toString();if(i==t)return!0}return!1},inputchange:function(){this.formfind.hotelid=parseInt(this.formfind.hotelidstr)},handleChange1:function(t){this.formfind.hotelidstr=t,this.getdevicelist()},handleBlur:function(){},handleFocus:function(){},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},init:function(){this.getdevicelist()},delmul:function(){var t=this;this.$confirm({title:"再次确认",onOk:function(){var e={};e.maclist=t.selectedRowKeys,e.mark=t.formfind.status,t.visible=!1,Object(s["e"])(e).then((function(e){null==e.data.code&&(t.$notification.open({message:"错误",description:e.data}),t.$router.push("/login")),200==e.data.code?(t.$message.info("修改成功"),t.getdevicelist()):t.$message.error(e.data.msg)}))},onCancel:function(){},class:"test"})},formatDate:function(t){t=new Date(t);var e=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=t.getDate()<10?"0"+t.getDate():t.getDate(),r=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",a=(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":",o=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+n+i+" "+r+a+o},getdevicelist:function(){var t=this;this.ifloading=!0,this.selectedRowKeys=[],Object(s["a"])(this.formfind.hotelid,null).then((function(e){var n=e.data.data;if(n.length<1)return t.$message.error(n),void(t.ifloading=!1);t.devicelist=n,t.devicelistshow=n,t.ifloading=!1}))}}},f=d,h=(n("c02e"),n("0c7c")),p=Object(h["a"])(f,i,r,!1,null,"e2aa8bf2",null),m=p.exports;e["default"]=m}}]);