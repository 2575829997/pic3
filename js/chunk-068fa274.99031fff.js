(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-068fa274"],{8008:function(e,t,a){"use strict";var n=a("ad2d"),r=a.n(n);r.a},"89cd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-page",style:"min-height: "+e.pageMinHeight+"px"},[a("div",{staticClass:"listbody"},[a("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.add}},[e._v("添加用户")]),a("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:"id"},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a-button",{staticStyle:{margin:"1%"},attrs:{type:"primary"},on:{click:function(t){return e.edit(n)}}},[e._v("编辑")]),a("a-button",{staticStyle:{margin:"1%"},attrs:{type:"danger"},on:{click:function(t){return e.del(n)}}},[e._v("删除")]),a("a-button",{staticStyle:{margin:"1%"},attrs:{type:"primary"},on:{click:function(t){return e.distrubute(n)}}},[e._v("权限分配")])],1)}}])})],1),a("a-modal",{attrs:{title:"编辑用户"},on:{ok:e.handleOk,cancel:e.canceledit},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form-model",{attrs:{model:e.editdata}},[a("a-form-model-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.editdata.username,callback:function(t){e.$set(e.editdata,"username",t)},expression:"editdata.username"}})],1),a("a-form-model-item",{attrs:{label:"新密码(明文)"}},[a("a-input",{model:{value:e.editdata.password,callback:function(t){e.$set(e.editdata,"password",t)},expression:"editdata.password"}})],1)],1)],1),a("a-modal",{attrs:{title:"添加用户"},on:{ok:e.handleOkadd,cancel:e.canceladd},model:{value:e.visibleadd,callback:function(t){e.visibleadd=t},expression:"visibleadd"}},[a("a-form-model",{attrs:{model:e.adddata}},[a("a-form-model-item",{attrs:{label:"用户名"}},[a("a-input",{model:{value:e.adddata.username,callback:function(t){e.$set(e.adddata,"username",t)},expression:"adddata.username"}})],1),a("a-form-model-item",{attrs:{label:"设置密码"}},[a("a-input",{on:{change:e.passmd},model:{value:e.adddata.passwordMd5,callback:function(t){e.$set(e.adddata,"passwordMd5",t)},expression:"adddata.passwordMd5"}})],1),a("a-form-model-item",{attrs:{label:"密码加密值"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.adddata.password,callback:function(t){e.$set(e.adddata,"password",t)},expression:"adddata.password"}})],1),a("a-form-model-item",{attrs:{label:"初始管理酒店"}},[a("a-select",{attrs:{placeholder:"选择酒店"},model:{value:e.adddata.hotelIdList,callback:function(t){e.$set(e.adddata,"hotelIdList",t)},expression:"adddata.hotelIdList"}},e._l(e.hotellist,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.hotelId}},[e._v(e._s(t.hotelCname))])})),1)],1)],1)],1),a("a-drawer",{attrs:{title:"权限分配",placement:"right",width:"30%",closable:!0,visible:e.visibledrawer,"after-visible-change":e.afterVisibleChange},on:{close:e.onCloseDrawer}},[a("h1",[e._v("角色选择")]),a("div",[a("div",[a("a-checkbox",{attrs:{indeterminate:e.indeterminateForRole,checked:e.checkAllForRole},on:{change:e.onCheckAllChangeRole}},[e._v("全选角色")])],1),a("a-checkbox-group",{attrs:{options:e.rolelist},on:{change:e.onChangeRole},scopedSlots:e._u([{key:"label",fn:function(t){return a("span",{attrs:{title:t.roleid}},[e._v(e._s(t.rolename))])}}]),model:{value:e.rolechecked,callback:function(t){e.rolechecked=t},expression:"rolechecked"}})],1),a("hr"),a("br"),a("div",[a("h1",[e._v("酒店选择")]),a("div",[a("a-checkbox",{attrs:{indeterminate:e.indeterminate,checked:e.checkAll},on:{change:e.onCheckAllChange}},[e._v("全选酒店")])],1),a("a-checkbox-group",{attrs:{options:e.hotellist},on:{change:e.onChange},scopedSlots:e._u([{key:"label",fn:function(t){return a("span",{attrs:{title:t.hotelId}},[e._v(e._s(t.hotelCname))])}}]),model:{value:e.hotelchecked,callback:function(t){e.hotelchecked=t},expression:"hotelchecked"}})],1),a("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.saveprevilege}},[e._v("保存")])],1)],1)},r=[],i=a("1da1"),s=a("5530"),c=(a("96cf"),a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("5880")),o=a("93d6"),l=a("96ad"),d=a("d378"),u=[{title:"用户名",dataIndex:"username",key:"roleid",align:"center",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"用户密码(加密后)",dataIndex:"password",align:"center",key:"password"},{title:"管理酒店",align:"center",dataIndex:"hotelIdList",key:"hotelIdList"},{title:"操作",align:"center",key:"action",scopedSlots:{customRender:"action"}}],h=[],p={name:"usersList",data:function(){return{cusername:"",rolelist:[],rolechecked:[],indeterminateForRole:!0,rolelistvalue:[],checkAllForRole:!1,hotellistvalue:[],hotelchecked:[],indeterminate:!0,checkAll:!1,visibledrawer:!1,hotellist:[],adddata:{},visibleadd:!1,datatmp:{},editdatatmp:{},editdata:{},columns:u,data:h,visible:!1}},mounted:function(){this.initlist()},computed:Object(s["a"])({},Object(c["mapState"])("setting",["pageMinHeight"])),methods:{onChangeRole:function(e){this.indeterminateForRole=!!e.length&&e.length<this.rolelist.length,this.checkAllForRole=e.length===this.rolelist.length},onCheckAllChangeRole:function(e){Object.assign(this,{rolechecked:e.target.checked?this.rolelistvalue:[],indeterminateForRole:!1,checkAllForRole:e.target.checked})},onChange:function(e){this.indeterminate=!!e.length&&e.length<this.hotellist.length,this.checkAll=e.length===this.hotellist.length},onCheckAllChange:function(e){Object.assign(this,{hotelchecked:e.target.checked?this.hotellistvalue:[],indeterminate:!1,checkAll:e.target.checked})},saveprevilege:function(){var e=this,t=this.$createElement,a={rolechecked:this.rolechecked,hotelchecked:this.hotelchecked,username:this.cusername};Object(o["h"])(a).then((function(a){200==a.data.code&&(e.$notification.open({message:"修改成功",description:"【"+e.cusername+"】的权限已修改",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),e.visibledrawer=!1,e.initlist())}))},afterVisibleChange:function(e){},distrubute:function(e){var t=this;Object(o["d"])(e.username).then((function(e){if(200==e.data.code){for(var a=e.data.roleList,n=[],r=0;r<a.length;r++)n.push(a[r].roleid);t.rolechecked=n}})),this.hotelchecked=e.hotelIdList.split(","),this.visibledrawer=!0,this.cusername=e.username},onCloseDrawer:function(){this.visibledrawer=!1},del:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.next=3,t.$confirm({title:"确认删除【"+e.username+"】",content:"该操作不可逆",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){n.dealdel(e)},onCancel:function(){}});case 3:case"end":return a.stop()}}),a)})))()},dealdel:function(e){var t=this,a=this.$createElement;Object(o["b"])([e.username]).then((function(e){200==e.data.code&&(t.$notification.open({message:"成功消息",description:"删除成功",icon:a("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),t.adddata={},t.visibleadd=!1,t.initlist())}))},passmd:function(){this.adddata.password=this.$md5(this.adddata.passwordMd5)},canceladd:function(){},handleOkadd:function(){var e=this,t=this.$createElement;Object(o["a"])(this.adddata).then((function(a){200==a.data.code&&(e.$notification.open({message:"成功消息",description:"添加成功",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),e.adddata={},e.visibleadd=!1,e.initlist())})).catch((function(a){e.$notification.open({message:"错误消息",description:a.response.data.msg,icon:t("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #eb2f96"})})})),this.visible=!1,this.initlist()},add:function(){this.visibleadd=!0},canceledit:function(){this.editdata=this.editdatatmp,this.data=this.datatmp},handleOk:function(){var e=this,t=this.$createElement,a={username:this.editdata.username,password:this.$md5(this.editdata.password),passwordMd5:this.editdata.password};Object(o["g"])(a).then((function(a){200==a.data.code&&(e.$notification.open({message:"成功消息",description:"更新成功",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),e.editdata.password=e.$md5(e.editdata.password))})).catch((function(){e.$notification.open({message:"错误消息",description:"保存失败",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})})})),this.visible=!1},edit:function(e){this.visible=!0,this.editdata=e,this.editdatatmp=JSON.parse(JSON.stringify(this.editdata)),this.datatmp=JSON.parse(JSON.stringify(this.data))},initlist:function(){var e=this,t={},a={key:"",page:1,limit:100,search:""};t.params=a,Object(o["c"])(t).then((function(t){e.data=t.data.page.list})),Object(l["c"])().then((function(t){for(var a=t.data.hotelList,n=a.length,r=[],i=0;i<n;i++)a[i].value=a[i].hotelId.toString(),r.push(a[i].hotelId);e.hotellist=a,e.hotellistvalue=r}));var n={page:1,limit:1e3},r={};r.params=JSON.stringify(n),Object(d["c"])(r).then((function(t){for(var a=t.data.page.list,n=a.length,r=[],i=0;i<n;i++)a[i].value=a[i].roleid,r.push(a[i].roleid);e.rolelist=a,e.rolelistvalue=r}))}}},m=p,f=(a("8008"),a("0c7c")),b=Object(f["a"])(m,n,r,!1,null,"4d80dedd",null),v=b.exports;t["default"]=v},"96ad":function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return m})),a.d(t,"e",(function(){return b}));var n=a("1da1"),r=(a("96cf"),a("b775")),i=a("7424");function s(){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(r["e"])(i["HOTELLIST"],r["a"].GET),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(r["e"])(i["TESTROOMTV"],r["a"].POST,t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(r["e"])(i["GETROOMSTAUS"],r["a"].POST,t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function h(e,t){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(r["e"])(i["DEVICELIST"]+t,r["a"].POST,a),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(e,t){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(r["e"])(i["DEVICELISTALL"]+t,r["a"].POST,a),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(r["e"])(i["MARKDEVICE"],r["a"].POST,t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},ad2d:function(e,t,a){},d378:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return h}));var n=a("1da1"),r=(a("96cf"),a("7424")),i=a("b775");function s(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(i["e"])(r["SAVEROLE"],i["a"].POST,t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function o(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(i["e"])(r["ADDROLE"],i["a"].POST,t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(i["e"])(r["GETROLELIST"],i["a"].POST,t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(i["e"])(r["DELE"]+t,i["a"].POST),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}}}]);