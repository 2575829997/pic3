(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dc6beb6"],{"9c2f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._m(1),a("div",{staticClass:"search"},[a("div",{staticClass:"find"},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("a-row",{attrs:{gutter:12,type:"flex",justify:"space-around",align:"middle"}},[a("a-col",{directives:[{name:"show",rawName:"v-show",value:t.hotellist.length>1||"hotels"!=t.user.type,expression:"hotellist.length>1||user.type!='hotels'"}],attrs:{span:6}},[a("div",[a("a-select",{staticClass:"finditem",attrs:{"show-search":"",placeholder:"选择酒店","option-filter-prop":"children","filter-option":t.filterOption},on:{focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange},model:{value:t.formfind.hotelid,callback:function(e){t.$set(t.formfind,"hotelid",e)},expression:"formfind.hotelid"}},t._l(t.hotellist,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.hotelId}},[t._v(" "+t._s(e.hotelCname)+" ")])})),1)],1)]),a("a-col",{attrs:{span:6}},[a("a-range-picker",{staticClass:"finditem",attrs:{disabledDate:t.disabledDate,ranges:{"今天":[t.moment(),t.moment()],"近7天":[t.moment().subtract("days",6),t.moment()],"近15天":[t.moment().subtract("days",14),t.moment()],"当月":[t.moment().startOf("month"),t.moment()],"上个月":[t.moment().subtract("month",1).startOf("month"),t.moment().subtract("month",1).endOf("month")]},format:t.dateFormat},on:{change:t.onChange},model:{value:t.rangedate,callback:function(e){t.rangedate=e},expression:"rangedate"}})],1),a("a-col",{attrs:{span:6}},[a("a-select",{staticClass:"finditem",model:{value:t.formfind.granularity,callback:function(e){t.$set(t.formfind,"granularity",e)},expression:"formfind.granularity"}},[a("a-select-option",{attrs:{value:"month"}},[t._v(" 月 ")]),a("a-select-option",{attrs:{value:"day"}},[t._v(" 日 ")]),a("a-select-option",{attrs:{value:"hour"}},[t._v(" 时 ")])],1)],1),a("a-col",{attrs:{span:6}},[a("a-button",{staticClass:"finditem",attrs:{type:"primary"},on:{click:t.changeData}},[t._v("查询")])],1)],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("a-row",{attrs:{gutter:12,align:"middle"}},[a("a-col",{attrs:{span:6}},[a("a-button",{staticClass:"finditem",attrs:{type:"primary"},on:{click:t.exportdata}},[t._v("导出相关excel数据")])],1)],1)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.ifloading,expression:"ifloading"}],staticClass:"loading"},[a("a-spin",{attrs:{tip:"统计中..."}},[a("div",{staticClass:"spin-content"})])],1),a("div",{staticClass:"chartbody"},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("div",{staticClass:"chart",attrs:{id:"myChart6"}})]),a("a-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("div",{staticClass:"chart",attrs:{id:"myChart7"}})])],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",{staticClass:"chart",attrs:{id:"myChart8"}})])],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",{staticClass:"chart",attrs:{id:"myChart13"}})])],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart9"}})]),a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart10"}})]),a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart11"}})]),a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart12"}})])],1)],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kanban"},[a("div",{staticClass:"signboard"},[a("div",{staticClass:"sign"},[t._v("该页面数据统计始于 "),a("br"),a("span",{staticStyle:{color:"red"}},[t._v("2021年11月23日")]),t._v(" , "),a("br"),t._v(" 如有不便敬请谅解! ")]),a("div",{staticClass:"strings"}),a("div",{staticClass:"pin top"}),a("div",{staticClass:"pin left"}),a("div",{staticClass:"pin right"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("p",[t._v("小布鲁页面使用情况统计")])])}],r=a("5530"),s=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5880")),o=a("6af2"),c=a("1da1"),d=(a("96cf"),a("7424")),l=a("b775");function h(t){return f.apply(this,arguments)}function f(){return f=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["USERNUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function u(t){return m.apply(this,arguments)}function m(){return m=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["PAGENUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function p(t){return y.apply(this,arguments)}function y(){return y=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["PAGESNUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function b(t,e){return g.apply(this,arguments)}function g(){return g=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=Object(l["e"])(d["BESTLIKE"]+a,l["a"].POST,e),t.abrupt("return",i);case 2:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function v(t){return x.apply(this,arguments)}function x(){return x=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["XBLEXPORTEXCEL"]+e,l["a"].GET,null,{responseType:"arraybuffer"}),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function w(t){return C.apply(this,arguments)}function C(){return C=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["PAGESUSERNUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}var S=a("c32d"),O=a.n(S),A={name:"xblStatistics",components:{MyIcon:o["a"]},data:function(){return{formfind:{hotelid:0,roomid:"",granularity:"day",starttimeformat:"",endtimeformat:""},rangedate:[],disabledDate:{},ifloading:!1,dateFormat:"YYYY-MM-DD",monthFormat:"YYYY-MM",dateFormatList:["DD-MM-YYYY","DD-MM-YY"],dataechart:{}}},watch:{checkedKeys:function(t){}},mounted:function(){var t=this;this.formfind.hotelid=this.hotellist[0].hotelId,this.chotelname=this.hotellist[0].hotelCname,this.disabledDate=function(t){return t&&t>=O()().endOf("day")||t<O()("2021-11-23")};var e=O()().format("YYYY-MM-DD"),a=O()().subtract("days",7).format("YYYY-MM-DD");this.rangedate.push(a),this.rangedate.push(e),this.formfind.starttimeformat=a+" 00:00:00",this.formfind.endtimeformat=e+" 23:59:59",this.dataechart6={title:{textStyle:{fontSize:24},text:"使用人数",subtext:"客人不重复",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用人数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["2020-09-18",131],["2020-09-19",131]],type:"bar",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart7={title:{textStyle:{fontSize:24},text:"页面访问总次数",subtext:"",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["2020-09-18",131],["2020-09-19",131]],type:"bar",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart8={title:{textStyle:{fontSize:24},text:"页面访问次数",subtext:"",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"页面",type:"category"},yAxis:{name:"访问次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["登录",131],["客控主页",131],["门锁1",131],["门锁2",131],["空调",131],["灯光",131],["电视",131],["服务主页",131],["送物服务",131],["问询服务",131],["维修打扫",131],["礼宾服务",131],["评价服务",131],["个人中心",131],["我的服务",131]],type:"bar",itemStyle:{normal:{color:function(t){var e=["#ff2600ba","#ff5e00ba","#ff7b00ba","#ffd000ba","#91ff00ba","#09ff00ba","#00ff6aba","#00fff2ba","#0084ffba","#003cffba","#3700ffba","#9900ffba","#ff00b3ba","#ff0055ba","#ff004cba","#ff0000ba","#a9bbe8ba"];return e[t.dataIndex]}}},label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart9={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的客户",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["张三",131],["李四",120],["王五",110]],type:"line",label:{show:!0,position:"top",distance:50,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart10={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的月份",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["十月",131],["十二月",120],["五月",110]],type:"line",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart11={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的日",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["5号",131],["10号",120],["21号",110]],type:"line",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart12={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的时",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["11点",131],["12点",120],["1点",110]],type:"line",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart13={title:{textStyle:{fontSize:24},text:"页面访问人数",subtext:"",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"页面",type:"category"},yAxis:{name:"访问人数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["登录",131],["客控主页",131],["门锁1",131],["门锁2",131],["空调",131],["灯光",131],["电视",131],["服务主页",131],["送物服务",131],["问询服务",131],["维修打扫",131],["礼宾服务",131],["评价服务",131],["个人中心",131],["我的服务",131]],type:"bar",itemStyle:{normal:{color:function(t){var e=["#ff2600ba","#ff5e00ba","#ff7b00ba","#ffd000ba","#91ff00ba","#09ff00ba","#00ff6aba","#00fff2ba","#0084ffba","#003cffba","#3700ffba","#9900ffba","#ff00b3ba","#ff0055ba","#ff004cba","#ff0000ba","#a9bbe8ba"];return e[t.dataIndex]}}},label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.changeData(),this.drawLine6(),this.drawLine7(),this.drawLine8(),this.drawLine9(),this.drawLine10(),this.drawLine11(),this.drawLine12(),this.drawLine13(),window.onresize=function(){var e=t.$echarts.init(document.getElementById("myChart6"));e.resize();var a=t.$echarts.init(document.getElementById("myChart7"));a.resize();var i=t.$echarts.init(document.getElementById("myChart8"));i.resize();var n=t.$echarts.init(document.getElementById("myChart9"));n.resize();var r=t.$echarts.init(document.getElementById("myChart10"));r.resize();var s=t.$echarts.init(document.getElementById("myChart11"));s.resize();var o=t.$echarts.init(document.getElementById("myChart12"));o.resize();var c=t.$echarts.init(document.getElementById("myChart13"));c.resize()}},created:function(){},computed:Object(r["a"])(Object(r["a"])({},Object(s["mapState"])("setting",["pageMinHeight"])),Object(s["mapGetters"])("account",["user","hotellist"])),methods:{exportdata:function(){var t=JSON.stringify(this.formfind);v(encodeURI(encodeURI(t))).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","xblpageExcel.xlsx"),document.body.appendChild(a),a.click()}))},handleChange:function(t){},handleBlur:function(){},handleFocus:function(){},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},changeData:function(){var t=this;this.formfind.starttimeformat.length<15?this.$message.error("时间范围未选择"):(h(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)n.push(a[r].item),n.push(a[r].count),i.push(n),n=[];t.dataechart6.series[0].data=i,t.drawLine6()}})),u(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)n.push(a[r].item),n.push(a[r].count),i.push(n),n=[];t.dataechart7.series[0].data=i,t.drawLine7()}})),p(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)""!=a[r].item&&(n.push(a[r].item),n.push(a[r].count),i.push(n),n=[]);t.dataechart8.series[0].data=i,t.drawLine8()}})),b(this.formfind,"person").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)n.push(a[r].item),n.push(a[r].count),i.push(n),n=[];t.dataechart9.series[0].data=i,t.drawLine9()}})),b(this.formfind,"month").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)n.push(a[r].item),n.push(a[r].count),i.push(n),n=[];t.dataechart10.series[0].data=i,t.drawLine10()}})),b(this.formfind,"day").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)n.push(a[r].item),n.push(a[r].count),i.push(n),n=[];t.dataechart11.series[0].data=i,t.drawLine11()}})),b(this.formfind,"hour").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)n.push(a[r].item),n.push(a[r].count),i.push(n),n=[];t.dataechart12.series[0].data=i,t.drawLine12()}})),w(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,i=[],n=[],r=0;r<a.length;r++)""!=a[r].item&&(n.push(a[r].item),n.push(a[r].count),i.push(n),n=[]);t.dataechart13.series[0].data=i,t.drawLine13()}})))},moment:O.a,onChange:function(t,e){this.formfind.starttimeformat=e[0]+" 00:00:00",this.formfind.endtimeformat=e[1]+" 23:59:59"},drawLine6:function(){var t=this.$echarts.init(document.getElementById("myChart6"));t.clear(),t.setOption(this.dataechart6,!0)},drawLine7:function(){var t=this.$echarts.init(document.getElementById("myChart7"));t.clear(),t.setOption(this.dataechart7,!0)},drawLine8:function(){var t=this.$echarts.init(document.getElementById("myChart8"));t.clear(),t.setOption(this.dataechart8,!0)},drawLine9:function(){var t=this.$echarts.init(document.getElementById("myChart9"));t.clear(),t.setOption(this.dataechart9,!0)},drawLine10:function(){var t=this.$echarts.init(document.getElementById("myChart10"));t.clear(),t.setOption(this.dataechart10,!0)},drawLine11:function(){var t=this.$echarts.init(document.getElementById("myChart11"));t.clear(),t.setOption(this.dataechart11,!0)},drawLine12:function(){var t=this.$echarts.init(document.getElementById("myChart12"));t.clear(),t.setOption(this.dataechart12,!0)},drawLine13:function(){var t=this.$echarts.init(document.getElementById("myChart13"));t.clear(),t.setOption(this.dataechart13,!0)}}},E=A,L=(a("d996"),a("0c7c")),I=Object(L["a"])(E,i,n,!1,null,"6f38e340",null),k=I.exports;e["default"]=k},cb1b:function(t,e,a){},d996:function(t,e,a){"use strict";var i=a("cb1b"),n=a.n(i);n.a}}]);