(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07fb67b1"],{15:function(e,t){},"40ce":function(e,t,n){},"637a":function(e,t,n){"use strict";var r=n("40ce"),a=n.n(r);a.a},"67ad":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
  * Reqwest! A general purpose XHR connection manager
  * license MIT (c) Dustin Diaz 2015
  * https://github.com/ded/reqwest
  */!function(e,t,n){module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,0,(function(){var context=this,XHR2;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else try{XHR2=__webpack_require__(15)}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(!0===e["crossOrigin"]){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t["headers"]||{};r["Accept"]=r["Accept"]||defaultHeaders["accept"][t["type"]]||defaultHeaders["accept"]["*"];var a="undefined"!==typeof FormData&&t["data"]instanceof FormData;for(n in t["crossOrigin"]||r[requestedWith]||(r[requestedWith]=defaultHeaders["requestedWith"]),r[contentType]||a||(r[contentType]=t["contentType"]||defaultHeaders["contentType"]),r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!==typeof t["withCredentials"]&&"undefined"!==typeof e.withCredentials&&(e.withCredentials=!!t["withCredentials"])}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var a=uniqid++,s=e["jsonpCallback"]||"callback",i=e["jsonpCallbackName"]||reqwest.getcallbackPrefix(a),o=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),l=r.match(o),c=doc.createElement("script"),u=0,d=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?r=r.replace(o,"$1="+i):i=l[3]:r=urlappend(r,s+"="+i),context[i]=generalCallback,c.type="text/javascript",c.src=r,c.async=!0,"undefined"===typeof c.onreadystatechange||d||(c.htmlFor=c.id="_reqwest_"+a),c.onload=c.onreadystatechange=function(){if(c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||u)return!1;c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),u=1},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),u=1}}}function getRequest(e,t){var n,r=this.o,a=(r["method"]||"GET").toUpperCase(),s="string"===typeof r?r:r["url"],i=!1!==r["processData"]&&r["data"]&&"string"!==typeof r["data"]?reqwest.toQueryString(r["data"]):r["data"]||null,o=!1;return"jsonp"!=r["type"]&&"GET"!=a||!i||(s=urlappend(s,i),i=null),"jsonp"==r["type"]?handleJsonp(r,e,t,s):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(a,s,!1!==r["async"]),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},o=!0):n.onreadystatechange=handleReadyState(this,e,t),r["before"]&&r["before"](n),o?setTimeout((function(){n.send(i)}),200):n.send(i),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){this.url="string"==typeof o?o:o["url"],this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;function complete(e){o["timeout"]&&clearTimeout(self.timeout),self.timeout=null;while(self._completeHandlers.length>0)self._completeHandlers.shift()(e)}function success(resp){var type=o["type"]||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML;break}self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);while(self._fulfillmentHandlers.length>0)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;while(self._errorHandlers.length>0)self._errorHandlers.shift()(e,t,n);complete(e)}fn=fn||function(){},o["timeout"]&&(this.timeout=setTimeout((function(){timedOut()}),o["timeout"])),o["success"]&&(this._successHandler=function(){o["success"].apply(o,arguments)}),o["error"]&&this._errorHandlers.push((function(){o["error"].apply(o,arguments)})),o["complete"]&&this._completeHandlers.push((function(){o["complete"].apply(o,arguments)})),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,a,s,i=e.name,o=e.tagName.toLowerCase(),l=function(e){e&&!e["disabled"]&&t(i,normalize(e["attributes"]["value"]&&e["attributes"]["value"]["specified"]?e["value"]:e["text"]))};if(!e.disabled&&i)switch(o){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),a=e.value,(!n&&!r||e.checked)&&t(i,normalize(n&&""===a?"on":a)));break;case"textarea":t(i,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&l(e.options[s]);break}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,a,s;for(r=0;r<t.length;r++)for(s=e[byTag](t[r]),a=0;a<s.length;a++)serial(s[a],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply((function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n}),arguments),e}function buildParams(e,t,n,r){var a,s,i,o=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)i=t[s],n||o.test(e)?r(e,i):buildParams(e+"["+("object"===typeof i?s:"")+"]",i,n,r);else if(t&&"[object Object]"===t.toString())for(a in t)buildParams(e+"["+a+"]",t[a],n,r);else r(e,t)}return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply((function(t,n){e.push({name:t,value:n})}),arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,a=t||!1,s=[],i=encodeURIComponent,o=function(e,t){t="function"===typeof t?t():null==t?"":t,s[s.length]=i(e)+"="+i(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)o(e[r]["name"],e[r]["value"]);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],a,o);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e["type"]&&(e["method"]=e["type"])&&delete e["type"],e["dataType"]&&(e["type"]=e["dataType"]),e["jsonpCallback"]&&(e["jsonpCallbackName"]=e["jsonpCallback"])&&delete e["jsonpCallback"],e["jsonp"]&&(e["jsonpCallback"]=e["jsonp"])),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){for(var t in e=e||{},e)globalSetupOptions[t]=e[t]},reqwest}))},9719:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"new-page",style:"min-height: "+e.pageMinHeight+"px"},[n("div",{staticClass:"headbtn"},[n("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.add}},[e._v("添加角色")])],1),n("div",{staticClass:"listbody"},[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,rowKey:"id"},scopedSlots:e._u([{key:"name",fn:function(t){return n("a",{},[e._v(e._s(t))])}},{key:"action",fn:function(t,r){return n("span",{},[n("a-button",{staticStyle:{margin:"1%"},attrs:{type:"primary"},on:{click:function(t){return e.edit(r)}}},[e._v("编辑")]),n("a-button",{staticStyle:{margin:"1%"},attrs:{type:"danger"},on:{click:function(t){return e.del(r)}}},[e._v("删除")]),n("a-button",{staticStyle:{margin:"1%"},attrs:{type:"primary"},on:{click:function(t){return e.distrubute(r)}}},[e._v("权限分配")])],1)}}])},[n("span",{attrs:{slot:"customTitle"},slot:"customTitle"},[n("a-icon",{attrs:{type:"smile-o"}}),e._v("Name ")],1)])],1),n("a-modal",{attrs:{title:"编辑角色"},on:{ok:e.handleOk,cancel:e.canceledit},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form-model",{attrs:{model:e.editdata}},[n("a-form-model-item",{attrs:{label:"角色编号"}},[n("a-input",{attrs:{disabled:!0},model:{value:e.editdata.roleid,callback:function(t){e.$set(e.editdata,"roleid",t)},expression:"editdata.roleid"}})],1),n("a-form-model-item",{attrs:{label:"角色名称"}},[n("a-input",{model:{value:e.editdata.rolename,callback:function(t){e.$set(e.editdata,"rolename",t)},expression:"editdata.rolename"}})],1)],1)],1),n("a-modal",{attrs:{title:"添加角色"},on:{ok:e.handleOkadd,cancel:e.canceladd},model:{value:e.visibleadd,callback:function(t){e.visibleadd=t},expression:"visibleadd"}},[n("a-form-model",{attrs:{model:e.adddata}},[n("a-form-model-item",{attrs:{label:"角色编号"}},[n("a-input",{model:{value:e.adddata.roleid,callback:function(t){e.$set(e.adddata,"roleid",t)},expression:"adddata.roleid"}})],1),n("a-form-model-item",{attrs:{label:"角色名称"}},[n("a-input",{model:{value:e.adddata.rolename,callback:function(t){e.$set(e.adddata,"rolename",t)},expression:"adddata.rolename"}})],1)],1)],1),n("a-drawer",{attrs:{title:"权限分配",placement:"right",closable:!0,visible:e.visibledrawer,"after-visible-change":e.afterVisibleChange},on:{close:e.onCloseDrawer}},[n("a-button",{attrs:{type:"primary"},on:{click:e.saveprevilege}},[e._v("保存")]),n("a-tree",{attrs:{checkable:"","expanded-keys":e.expandedKeys,"auto-expand-parent":e.autoExpandParent,"selected-keys":e.selectedKeys,"tree-data":e.treeData},on:{expand:e.onExpand,select:e.onSelect},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1)],1)},a=[],s=n("1da1"),i=n("5530"),o=(n("96cf"),n("5880")),l=n("67ad"),c=n.n(l),u=n("d378"),d=n("7424"),p=n("b775");function f(e){return h.apply(this,arguments)}function h(){return h=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(p["e"])(d["PREVILEGElIST"]+t,p["a"].GET),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e,t){return y.apply(this,arguments)}function y(){return y=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object(p["e"])(d["UPDATAPREVILEGElIST"]+t,p["a"].POST,n),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}var b=[{title:"角色编号",dataIndex:"roleid",key:"roleid",align:"center",slots:{title:"customTitle"},scopedSlots:{customRender:"name"}},{title:"角色名称",dataIndex:"rolename",key:"rolename"},{title:"操作",align:"center",key:"action",scopedSlots:{customRender:"action"}}],_=[{key:"1",rolename:"加载中",roleid:"加载中"}],g=[],v={name:"rolelist",data:function(){return{crole:"",preList:[],nowList:[],expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],treeData:g,visibledrawer:!1,visibleadd:!1,adddata:{},editdatatmp:{},editdata:{},visible:!1,data:_,columns:b,desc:"这是一个演示页面"}},watch:{checkedKeys:function(e){}},mounted:function(){this.initlist()},computed:Object(i["a"])({},Object(o["mapState"])("setting",["pageMinHeight"])),methods:{saveprevilege:function(){var e=this,t=this.$createElement;this.nowList=this.checkedKeys;var n={nowList:this.nowList,preList:this.preList};m(this.crole,n).then((function(n){200==n.data.code&&(e.$notification.open({message:"成功消息",description:"修改成功",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),e.visibledrawer=!1)}))},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onCheck:function(e){this.checkedKeys=e},onSelect:function(e,t){this.selectedKeys=e},afterVisibleChange:function(e){},distrubute:function(e){var t=this;this.crole=e.roleid,this.visibledrawer=!0;var n=this;f(e.roleid).then((function(e){n.treeData=e.data.treeRoleMap.data,n.checkedKeys=e.data.treeRoleMap.roleList,t.preList=n.checkedKeys}))},onCloseDrawer:function(){this.visibledrawer=!1},del:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t,n.next=3,t.$confirm({title:"确认删除【"+e.rolename+"】",content:"该操作不可逆",okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){r.dealdel(e)},onCancel:function(){}});case 3:case"end":return n.stop()}}),n)})))()},dealdel:function(e){var t=this,n=this.$createElement;Object(u["b"])(e.roleid).then((function(e){200==e.data.code&&(t.$notification.open({message:"成功消息",description:"删除成功",icon:n("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),t.adddata={},t.visibleadd=!1,t.initlist())}))},canceladd:function(){},handleOkadd:function(){var e=this,t=this.$createElement;Object(u["a"])(this.adddata).then((function(n){200==n.data.code&&(e.$notification.open({message:"成功消息",description:"添加成功",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),e.adddata={},e.visibleadd=!1,e.initlist())})).catch((function(n){e.$notification.open({message:"错误消息",description:n.response.data.msg,icon:t("a-icon",{attrs:{type:"exclamation-circle"},style:"color: #eb2f96"})})})),this.visible=!1},add:function(){this.visibleadd=!0},canceledit:function(){this.editdata=this.editdatatmp,this.data=this.datatmp},handleOk:function(){var e=this,t=this.$createElement;Object(u["d"])(this.editdata).then((function(n){200==n.data.code&&e.$notification.open({message:"成功消息",description:"保存成功",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})})})).catch((function(){e.$notification.open({message:"错误消息",description:"保存失败",icon:t("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})})})),this.visible=!1},edit:function(e){var t=this,n=this.$createElement;this.visible=!0,this.editdata=e,this.editdatatmp=JSON.parse(JSON.stringify(this.editdata)),this.datatmp=JSON.parse(JSON.stringify(this.data)),this.getrole((function(e){200!=e.code&&(t.$notification.open({message:"错误消息",description:"查询角色信息失败",icon:n("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"})}),t.visible=!1)}))},initlist:function(){var e=this,t={page:1,limit:1e3},n={};n.params=JSON.stringify(t),Object(u["c"])(n).then((function(t){e.data=t.data.page.list}))},getrole:function(e){c()({url:"http://localhost:8081/xiaozhu/api/role/info/"+this.editdata.roleid,data:{params:""},type:"json",method:"get",contentType:"application/json",success:function(t){e(t)}})}}},x=v,w=(n("637a"),n("0c7c")),k=Object(w["a"])(x,r,a,!1,null,"c953423e",null),R=k.exports;t["default"]=R},d378:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return p}));var r=n("1da1"),a=(n("96cf"),n("7424")),s=n("b775");function i(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(s["e"])(a["SAVEROLE"],s["a"].POST,t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function l(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(s["e"])(a["ADDROLE"],s["a"].POST,t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(s["e"])(a["GETROLELIST"],s["a"].POST,t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(s["e"])(a["DELE"]+t,s["a"].POST),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}}}]);