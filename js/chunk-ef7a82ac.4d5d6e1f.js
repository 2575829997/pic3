(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef7a82ac"],{"46cfb":function(t,e,a){"use strict";var n=a("a690"),i=a.n(n);i.a},"9c2f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"search"},[a("div",{staticClass:"find"},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("a-row",{attrs:{gutter:12,type:"flex",justify:"space-around",align:"middle"}},[a("a-col",{directives:[{name:"show",rawName:"v-show",value:t.hotellist.length>1||"hotels"!=t.user.type,expression:"hotellist.length>1||user.type!='hotels'"}],attrs:{span:6}},[a("div",[a("a-select",{staticClass:"finditem",attrs:{"show-search":"",placeholder:"选择酒店","option-filter-prop":"children","filter-option":t.filterOption},on:{focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange},model:{value:t.formfind.hotelid,callback:function(e){t.$set(t.formfind,"hotelid",e)},expression:"formfind.hotelid"}},t._l(t.hotellist,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.hotelId}},[t._v(" "+t._s(e.hotelCname)+" ")])})),1)],1)]),a("a-col",{attrs:{span:6}},[a("a-range-picker",{staticClass:"finditem",attrs:{disabledDate:t.disabledDate,ranges:{"今天":[t.moment(),t.moment()],"近7天":[t.moment().subtract("days",6),t.moment()],"近15天":[t.moment().subtract("days",14),t.moment()],"当月":[t.moment().startOf("month"),t.moment()],"上个月":[t.moment().subtract("month",1).startOf("month"),t.moment().subtract("month",1).endOf("month")]},format:t.dateFormat},on:{change:t.onChange},model:{value:t.formfind.rangedate,callback:function(e){t.$set(t.formfind,"rangedate",e)},expression:"formfind.rangedate"}})],1),a("a-col",{attrs:{span:6}},[a("a-select",{staticClass:"finditem",model:{value:t.formfind.granularity,callback:function(e){t.$set(t.formfind,"granularity",e)},expression:"formfind.granularity"}},[a("a-select-option",{attrs:{value:"month"}},[t._v(" 月 ")]),a("a-select-option",{attrs:{value:"day"}},[t._v(" 日 ")]),a("a-select-option",{attrs:{value:"hour"}},[t._v(" 时 ")])],1)],1),a("a-col",{attrs:{span:6}},[a("a-button",{staticClass:"finditem",attrs:{type:"primary"},on:{click:t.changeData}},[t._v("查询")])],1)],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("a-row",{attrs:{gutter:12,align:"middle"}},[a("a-col",{attrs:{span:6}},[a("a-button",{staticClass:"finditem",attrs:{type:"primary"},on:{click:t.exportdata}},[t._v("导出相关excel数据")])],1)],1)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.ifloading,expression:"ifloading"}],staticClass:"loading"},[a("a-spin",{attrs:{tip:"统计中..."}},[a("div",{staticClass:"spin-content"})])],1),a("div",{staticClass:"chartbody"},[a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("div",{staticClass:"chart",attrs:{id:"myChart6"}})]),a("a-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[a("div",{staticClass:"chart",attrs:{id:"myChart7"}})])],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",{staticClass:"chart",attrs:{id:"myChart8"}})])],1),a("a-row",{attrs:{type:"flex"}},[a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart9"}})]),a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart10"}})]),a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart11"}})]),a("a-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("div",{staticClass:"chart",attrs:{id:"myChart12"}})])],1)],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("p",[t._v("小布鲁页面使用情况统计")])])}],r=a("5530"),s=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5880")),o=a("6af2"),c=a("1da1"),d=(a("96cf"),a("7424")),l=a("b775");function h(t){return m.apply(this,arguments)}function m(){return m=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["USERNUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function f(t){return u.apply(this,arguments)}function u(){return u=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["PAGENUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function p(t){return y.apply(this,arguments)}function y(){return y=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["PAGESNUM"],l["a"].POST,e),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function g(t,e){return x.apply(this,arguments)}function x(){return x=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(l["e"])(d["BESTLIKE"]+a,l["a"].POST,e),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function b(t){return v.apply(this,arguments)}function v(){return v=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(l["e"])(d["XBLEXPORTEXCEL"]+e,l["a"].GET,null,{responseType:"arraybuffer"}),t.abrupt("return",a);case 2:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}var w=a("c32d"),C=a.n(w),S={name:"xblStatistics",components:{MyIcon:o["a"]},data:function(){return{formfind:{hotelid:0,roomid:"",granularity:"day",starttimeformat:"",endtimeformat:"",rangedate:[]},disabledDate:{},ifloading:!1,dateFormat:"YYYY-MM-DD",monthFormat:"YYYY-MM",dateFormatList:["DD-MM-YYYY","DD-MM-YY"],dataechart:{}}},watch:{checkedKeys:function(t){}},mounted:function(){var t=this;this.formfind.hotelid=this.hotellist[0].hotelId,this.chotelname=this.hotellist[0].hotelCname,this.disabledDate=function(t){return t&&t>=C()().endOf("day")};var e=C()().format("YYYY-MM-DD HH:mm:ss"),a=C()().subtract("days",6).format("YYYY-MM-DD HH:mm:ss");this.formfind.rangedate.push(a),this.formfind.rangedate.push(e),this.dataechart6={title:{textStyle:{fontSize:24},text:"使用人数",subtext:"",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用人数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["2020-09-18",131],["2020-09-19",131]],type:"bar",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart7={title:{textStyle:{fontSize:24},text:"页面访问总次数",subtext:"",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["2020-09-18",131],["2020-09-19",131]],type:"bar",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart8={title:{textStyle:{fontSize:24},text:"各界面打开次数",subtext:"",left:"center"},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["登录",131],["客控主页",131],["门锁1",131],["门锁2",131],["空调",131],["灯光",131],["电视",131],["服务主页",131],["送物服务",131],["问询服务",131],["维修打扫",131],["礼宾服务",131],["评价服务",131],["个人中心",131],["我的服务",131]],type:"bar",itemStyle:{normal:{color:function(t){var e=["#ff2600ba","#ff5e00ba","#ff7b00ba","#ffd000ba","#91ff00ba","#09ff00ba","#00ff6aba","#00fff2ba","#0084ffba","#003cffba","#3700ffba","#9900ffba","#ff00b3ba","#ff0055ba","#ff004cba","#ff0000ba","#a9bbe8ba"];return e[t.dataIndex]}}},label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart9={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的客户",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["张三",131],["李四",120],["王五",110]],type:"line",label:{show:!0,position:"top",distance:50,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart10={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的月份",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["十月",131],["十二月",120],["五月",110]],type:"line",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart11={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的日",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["5号",131],["10号",120],["21号",110]],type:"line",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.dataechart12={title:{textStyle:{fontSize:20},text:"最喜欢小布鲁的时",subtext:"",left:"center"},tooltip:{trigger:"axis"},xAxis:{name:"日期",type:"category"},yAxis:{name:"使用次数",type:"value"},dataZoom:{start:0,type:"inside"},legend:{data:["设备在线"]},series:[{data:[["11点",131],["12点",120],["1点",110]],type:"line",label:{show:!0,position:"top",distance:20,verticalAlign:"middle",textStyle:{color:"black",fontSize:12}}}]},this.changeData(),this.drawLine6(),this.drawLine7(),this.drawLine8(),this.drawLine9(),this.drawLine10(),this.drawLine11(),this.drawLine12(),window.onresize=function(){var e=t.$echarts.init(document.getElementById("myChart6"));e.resize();var a=t.$echarts.init(document.getElementById("myChart7"));a.resize();var n=t.$echarts.init(document.getElementById("myChart8"));n.resize();var i=t.$echarts.init(document.getElementById("myChart9"));i.resize();var r=t.$echarts.init(document.getElementById("myChart10"));r.resize();var s=t.$echarts.init(document.getElementById("myChart11"));s.resize();var o=t.$echarts.init(document.getElementById("myChart12"));o.resize()}},created:function(){},computed:Object(r["a"])(Object(r["a"])({},Object(s["mapState"])("setting",["pageMinHeight"])),Object(s["mapGetters"])("account",["user","hotellist"])),methods:{exportdata:function(){var t=JSON.stringify(this.formfind);b(encodeURI(encodeURI(t))).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","xblpageExcel.xlsx"),document.body.appendChild(a),a.click()}))},handleChange:function(t){},handleBlur:function(){},handleFocus:function(){},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},changeData:function(){var t=this;h(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart6.series[0].data=n,t.drawLine6()}})),f(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart7.series[0].data=n,t.drawLine7()}})),p(this.formfind).then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart8.series[0].data=n,t.drawLine8()}})),g(this.formfind,"person").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart9.series[0].data=n,t.drawLine9()}})),g(this.formfind,"month").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart10.series[0].data=n,t.drawLine10()}})),g(this.formfind,"day").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart11.series[0].data=n,t.drawLine11()}})),g(this.formfind,"hour").then((function(e){if(200==e.data.code){for(var a=e.data.data.data,n=[],i=[],r=0;r<a.length;r++)i.push(a[r].item),i.push(a[r].count),n.push(i),i=[];t.dataechart12.series[0].data=n,t.drawLine12()}}))},moment:C.a,onChange:function(t,e){this.formfind.starttimeformat=e[0]+" 00:00:00",this.formfind.endtimeformat=e[1]+" 23:59:59"},drawLine6:function(){var t=this.$echarts.init(document.getElementById("myChart6"));t.clear(),t.setOption(this.dataechart6,!0)},drawLine7:function(){var t=this.$echarts.init(document.getElementById("myChart7"));t.clear(),t.setOption(this.dataechart7,!0)},drawLine8:function(){var t=this.$echarts.init(document.getElementById("myChart8"));t.clear(),t.setOption(this.dataechart8,!0)},drawLine9:function(){var t=this.$echarts.init(document.getElementById("myChart9"));t.clear(),t.setOption(this.dataechart9,!0)},drawLine10:function(){var t=this.$echarts.init(document.getElementById("myChart10"));t.clear(),t.setOption(this.dataechart10,!0)},drawLine11:function(){var t=this.$echarts.init(document.getElementById("myChart11"));t.clear(),t.setOption(this.dataechart11,!0)},drawLine12:function(){var t=this.$echarts.init(document.getElementById("myChart12"));t.clear(),t.setOption(this.dataechart12,!0)}}},O=S,L=(a("46cfb"),a("0c7c")),A=Object(L["a"])(O,n,i,!1,null,"0e9157a4",null),E=A.exports;e["default"]=E},a690:function(t,e,a){}}]);